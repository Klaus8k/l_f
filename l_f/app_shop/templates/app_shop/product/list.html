{% extends 'app_shop/base.html' %}
{% load static %}

<!-- Тайтл сайта -->
{% block title %}
  {% if category %}
    {{ category.name }}
  {% else %}
    {% comment %}Название сайта{% endcomment %}
  {% endif %}
{% endblock %}

{% block content %}
  <!-- Start breadcrumb section -->
  <section class="breadcrumb__section breadcrumb__bg">
    <div class="container">
      <div class="row row-cols-1">
        <div class="col">
          <div class="breadcrumb__content text-center">
            <h1 class="breadcrumb__content--title">Наша продукция</h1>

            {% comment %}хлебные крошки{% endcomment %}
            <ul class="breadcrumb__content--menu d-flex justify-content-center">
              <li class="breadcrumb__content--menu__items">
                <a href="index.html">хлебная 1</a>
              </li>
              <li class="breadcrumb__content--menu__items">
                <span>хлебная 2</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- End breadcrumb section -->

  <!-- Start shop section -->
  <div class="shop__section section--padding">
    <div class="container">
      <div class="row">
        <div class="col-xl-3 col-lg-4 shop-col-width-lg-4">
          <div class="shop__sidebar--widget widget__area d-none d-lg-block">
            {% comment %}Выбор ОБЩИХ 3шт категорий{% endcomment %}
            <div class="single__widget widget__bg">
              <h2 class="widget__title h3">Категории</h2>

              {% for c in categories %}
                <ul class="widget__categories--menu">
                  <li class="widget__categories--menu__list">
                    <label class="widget__categories--menu__label d-flex align-items-center">
                      <img class="widget__categories--menu__img" src="{% static 'app_shop/img/product/small-product/product1.webp' %}" alt="categories-img" />
                      <span class="widget__categories--menu__text">{{ c.name }}</span>
                      <svg class="widget__categories--menu__arrowdown--icon" xmlns="http://www.w3.org/2000/svg" width="12.355" height="8.394">
                        <path d="M15.138,8.59l-3.961,3.952L7.217,8.59,6,9.807l5.178,5.178,5.178-5.178Z" transform="translate(-6 -8.59)" fill="currentColor"></path>
                      </svg>
                    </label>

                    {% comment %}выбор подкатегории в ОБЩЕЙ{% endcomment %}
                    {% for product in products %}
                      {% if product.category == c %}
                        <ul class="widget__categories--sub__menu">
                          <li class="widget__categories--sub__menu--list">
                            {% comment %}в ссылках <a href="{{ c.get_absolute_url }}">{{ c.name }}</a> {% endcomment %}
                            <a class="widget__categories--sub__menu--link d-flex align-items-center" href="{{ c.get_absolute_url }}">
                              <img class="widget__categories--sub__menu--img" src="{% static 'app_shop/img/product/small-product/product1.webp' %}" alt="categories-img" />
                              <span class="widget__categories--sub__menu--text">{{ product.name }}</span>
                            </a>
                          </li>
                        </ul>
                      {% endif %}
                    {% endfor %}
                  </li>
                </ul>
              {% endfor %}
            </div>

            {% comment %}Блок фильтры{% endcomment %}
            <div class="single__widget widget__bg">
              <h2 class="widget__title h3">фильтр по содержанию продуктов</h2>
              <ul class="widget__form--check">
                <li class="widget__form--check__list">
                  <label class="widget__form--check__label" for="check1">Максимум белка</label>
                  <input class="widget__form--check__input" id="check1" type="checkbox" />
                  <span class="widget__form--checkmark"></span>
                </li>
                <li class="widget__form--check__list">
                  <label class="widget__form--check__label" for="check2">Свинину не ем</label>
                  <input class="widget__form--check__input" id="check2" type="checkbox" />
                  <span class="widget__form--checkmark"></span>
                </li>
              </ul>
            </div>

            {% comment %}Фильтр по цене{% endcomment %}
            <div class="single__widget price__filter widget__bg">
              <h2 class="widget__title h3">Фильтр по цене</h2>
              <form class="price__filter--form" action="#">
                <div class="price__filter--form__inner mb-15 d-flex align-items-center">
                  <div class="price__filter--group">
                    <label class="price__filter--label" for="Filter-Price-GTE2">From</label>
                    <div class="price__filter--input border-radius-5 d-flex align-items-center">
                      <span class="price__filter--currency">руб.</span>
                      <input class="price__filter--input__field border-0" name="filter.v.price.gte" id="Filter-Price-GTE2" type="number" placeholder="0" min="0" max="250.00" />
                    </div>
                  </div>
                  <div class="price__divider">
                    <span>-</span>
                  </div>
                  <div class="price__filter--group">
                    <label class="price__filter--label" for="Filter-Price-LTE2">To</label>
                    <div class="price__filter--input border-radius-5 d-flex align-items-center">
                      <span class="price__filter--currency">руб.</span>
                      <input class="price__filter--input__field border-0" name="filter.v.price.lte" id="Filter-Price-LTE2" type="number" min="0" placeholder="250.00" max="250.00" />
                    </div>
                  </div>
                </div>
                <button class="primary__btn price__filter--btn" type="submit">Отфильтровать</button>
              </form>
            </div>
          </div>
        </div>

        {% comment %} блок плиток категорий (не общих а более мелких) {% endcomment %}
        {% comment %} Отображать только если не выбрана категория {% endcomment %}
        <div class="col-xl-9 col-lg-8 shop-col-width-lg-8">
          <div class="shop__right--sidebar">
            <!-- Start categories section -->
            <div class="categories__shop mb-50">
              <div class="section__heading border-bottom mb-30">
                <h2 class="section__heading--maintitle">Категории <span>продукции</span></h2>
              </div>

              <ul class="categories__shop--inner">
                {% for c in categories %}
                <li class="categories__shop--card">
                  <a class="categories__shop--card__link" href="{{ c.get_absolute_url }}">
                    <div class="categories__thumbnail mb-15">
                      <img class="categories__thumbnail--img" src="{% static 'app_shop/img/product/main-product/product1.webp' %}" alt="categories-img" />
                    </div>
                    <div class="categories__content">
                      <h2 class="categories__content--title">{{ c.name }}</h2>
                      {% comment %} количество продуктов в категории {% endcomment %}
                      <span class="categories__content--subtitle">количество позиций</span>
                    </div>
                  </a>

                </li>
                {% endfor %}

              </ul>

            </div>
            <!-- End categories section -->



          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="sidebar">
    <h3>Категории</h3>
    <ul>
      <li>
        <a href="{% url 'app_shop:product_list' %}">Все категории</a>
      </li>
      {% for c in categories %}
        <li>
          <a href="{{ c.get_absolute_url }}">{{ c.name }}</a>
        </li>
      {% endfor %}
    </ul>
  </div>
  <hr />

  <div id="main" class="product-list">
    <h3>
      {% if category %}
        {{ category.name }}
      {% else %}
        Товары
      {% endif %}
    </h3>
  </div>
  <div class="container">
    <div class="row row-col-4">
      {% for product in products %}
        <div class="col">
          <div class="card" style="width: 18rem;">
            <img src="{% if product.image %}
                {{ product.image.url }}
              {% else %}
                {% static 'app_shop/img/no_image.png' %}
              {% endif %}"
              class="card-img-top"
              alt="..." />
            <div class="card-body">
              <h4 class="card-title">{{ product.name }}</h4>
              <p class="card-text">Состав: {{ product.description }}</p>
              <h6 class="card-text">Цена: {{ product.price }} руб.</h6>
              <h6 class="card-text">вес/наличие</h6>
              <a href="{{ product.get_absolute_url }}" class="btn btn-primary">Детали</a>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}
